#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è Telegram CRM –±–æ—Ç–∞
–ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
"""

# =================================================================
# üîë –û–°–ù–û–í–ù–´–ï API –ù–ê–°–¢–†–û–ô–ö–ò TELEGRAM
# =================================================================

# –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: "userbot" –∏–ª–∏ "bot"
BOT_MODE = "bot"  # "userbot" - —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –ª–∏—á–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞, "bot" - –æ–±—ã—á–Ω—ã–π –±–æ—Ç

# === –î–õ–Ø –†–ï–ñ–ò–ú–ê BOT ===
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
BOT_TOKEN = "OOO WHOMEVER"

# === –î–õ–Ø –†–ï–ñ–ò–ú–ê USERBOT ===
# –ü–æ–ª—É—á–∏—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞ https://my.telegram.org
API_ID = OOO WHOMEVER  # –í–∞—à API ID (—á–∏—Å–ª–æ)
API_HASH = "OOO WHOMEVER"  # –í–∞—à API Hash (—Å—Ç—Ä–æ–∫–∞)

# –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è userbot)
PHONE_NUMBER = "+998901242797"  # –§–æ—Ä–º–∞—Ç: "+79001234567"

# –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (–º–æ–∂–Ω–æ –Ω–µ –º–µ–Ω—è—Ç—å)
SESSION_NAME = "telegram_crm_session"

# =================================================================
# üåê –ù–ê–°–¢–†–û–ô–ö–ò MTPROTO –°–ï–†–í–ï–†–û–í
# =================================================================

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ Telegram
TELEGRAM_SERVERS = {
    "test": {
        "ip": "1111",
        "port": 111,
        "dc_id": 2,
        "public_key": """-----BEGIN RSA PUBLIC KEY-----
123123BEGIN RSA PUBLIC KEY
-----END RSA PUBLIC KEY-----"""
    },
    "production": {
        "ip": "111", 
        "port": 11,
        "dc_id": 1,
        "public_key": """-----BEGIN RSA PUBLIC KEY-----
123123BEGIN RSA PUBLIC KEY
-----END RSA PUBLIC KEY-----"""
    }
}

# –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å–µ—Ä–≤–µ—Ä (test –∏–ª–∏ production)
TELEGRAM_SERVER_MODE = "production"

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
CONNECTION_RETRIES = 5
CONNECTION_TIMEOUT = 30
FLOOD_SLEEP_THRESHOLD = 60

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
USE_IPV6 = False
DEVICE_MODEL = "Desktop"
SYSTEM_VERSION = "Windows 10"
APP_VERSION = "1.0.0"
LANG_CODE = "ru"
SYSTEM_LANG_CODE = "ru-RU"

# =================================================================
# üëë –í–õ–ê–î–ï–õ–ï–¶ –ë–û–¢–ê
# =================================================================

# ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–æ—Ç–∞ (–ø–æ–ª—É—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
OWNER_ID = 0  # Telegram User ID –≤–ª–∞–¥–µ–ª—å—Ü–∞

# Username –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
OWNER_USERNAME = ""  # –ë–µ–∑ @, –Ω–∞–ø—Ä–∏–º–µ—Ä: "myusername"

# =================================================================
# üõ°Ô∏è –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–´
# =================================================================

# –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (Telegram User ID)
ADMIN_IDS = [
    # 123456789,  # ID –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞
    # 987654321,  # ID –≤—Ç–æ—Ä–æ–≥–æ –∞–¥–º–∏–Ω–∞
]

# –°–ª–æ–≤–∞—Ä—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å –∏—Ö username (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)
ADMIN_USERS = {
    # 123456789: "admin1_username",
    # 987654321: "admin2_username",
}

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ –∞–¥–º–∏–Ω—ã?
AUTO_ADD_OWNER_AS_ADMIN = True

# =================================================================
# üíæ –ù–ê–°–¢–†–û–ô–ö–ò –ë–ê–ó–´ –î–ê–ù–ù–´–•
# =================================================================

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DATABASE_PATH = "database/telegram_crm.db"

# –°–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ë–î?
AUTO_BACKUP = True

# –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–æ–≤ (–≤ —á–∞—Å–∞—Ö)
BACKUP_INTERVAL_HOURS = 24

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—ç–∫–∞–ø–æ–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
MAX_BACKUPS = 7

# =================================================================
# üìù –ù–ê–°–¢–†–û–ô–ö–ò –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
# =================================================================

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
LOGS_DIR = "logs"

# –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ª–æ–≥-—Ñ–∞–π–ª–∞
LOG_FILE = "crm_bot.log"

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL = "INFO"

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ª–æ–≥-—Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ —Ä–æ—Ç–∞—Ü–∏–µ–π
LOG_MAX_SIZE = "10 MB"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
LOG_BACKUP_COUNT = 5

# –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å?
LOG_TO_CONSOLE = True

# =================================================================
# üìä –ù–ê–°–¢–†–û–ô–ö–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê
# =================================================================

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
CONTACTS_PER_PAGE = 10

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–ø–∏—Å–∫–∏
MESSAGE_HISTORY_LIMIT = 20

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
MAX_MESSAGE_PREVIEW_LENGTH = 100

# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ
DATE_FORMAT = "%d.%m.%Y %H:%M"

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: "Europe/Moscow")
TIMEZONE = "UTC"

# =================================================================
# ‚ö° –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò
# =================================================================

# –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
MESSAGE_SEND_DELAY = 3

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
MAX_SEND_ATTEMPTS = 3

# –¢–∞–π–º–∞—É—Ç –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
DB_TIMEOUT = 30

# –†–∞–∑–º–µ—Ä –ø—É–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ë–î
DB_POOL_SIZE = 5

# =================================================================
# üö¶ –õ–ò–ú–ò–¢–´ –ò –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø
# =================================================================

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ —á–∞—Å
MAX_NEW_CONTACTS_PER_HOUR = 50

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Å
MAX_MESSAGES_PER_HOUR = 100

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∏–º–µ–Ω–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞
MAX_CONTACT_NAME_LENGTH = 100

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ –∫–æ–Ω—Ç–∞–∫—Ç—É
MAX_CONTACT_NOTE_LENGTH = 500

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
MAX_MESSAGE_LENGTH = 4096

# =================================================================
# üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# =================================================================

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –≤ –±–∞–∑—É?
AUTO_ADD_INCOMING_CONTACTS = True

# –£–≤–µ–¥–æ–º–ª—è—Ç—å –∞–¥–º–∏–Ω–æ–≤ –æ –Ω–æ–≤—ã—Ö –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö?
NOTIFY_ADMINS_NEW_MESSAGES = True

# –°–æ—Ö—Ä–∞–Ω—è—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã?
SAVE_MEDIA_FILES = True

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
MEDIA_DIR = "media"

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã –≤ Telegram?
AUTO_IMPORT_TO_TELEGRAM = True

# =================================================================
# üé® –ù–ê–°–¢–†–û–ô–ö–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê
# =================================================================

# –≠–º–æ–¥–∑–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
EMOJI = {
    "contacts": "üìá",
    "send_message": "üì®", 
    "history": "üóÇÔ∏è",
    "search": "üîç",
    "admins": "üìã",
    "statistics": "üìä",
    "settings": "‚öôÔ∏è",
    "add": "‚ûï",
    "edit": "‚úèÔ∏è",
    "delete": "üóëÔ∏è",
    "back": "‚¨ÖÔ∏è",
    "success": "‚úÖ",
    "error": "‚ùå",
    "warning": "‚ö†Ô∏è",
    "info": "‚ÑπÔ∏è",
    "user": "üë§",
    "phone": "üì±",
    "note": "üìù",
    "date": "üìÖ",
    "incoming": "üì®",
    "outgoing": "üì§"
}

# –¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫
BUTTON_TEXTS = {
    "main_menu": "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
    "contacts_menu": "üìá –ö–æ–Ω—Ç–∞–∫—Ç—ã", 
    "send_message": "üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ",
    "message_history": "üóÇÔ∏è –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏",
    "search": "üîç –ü–æ–∏—Å–∫",
    "manage_admins": "üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º–∏",
    "statistics": "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
    "settings": "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏",
    "add_contact": "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç",
    "list_contacts": "üìã –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
    "search_contacts": "üîç –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
    "back": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥",
    "cancel": "‚ùå –û—Ç–º–µ–Ω–∞",
    "edit": "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",
    "delete": "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å"
}

# =================================================================
# üì± –ù–ê–°–¢–†–û–ô–ö–ò –§–û–†–ú–ê–¢–û–í
# =================================================================

# –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
PHONE_REGEX = r'^\+[1-9]\d{1,14}$'

# –§–æ—Ä–º–∞—Ç—ã –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω
PHONE_FORMATS = {
    "RU": "+7XXXXXXXXXX",
    "UA": "+380XXXXXXXXX", 
    "BY": "+375XXXXXXXX",
    "KZ": "+77XXXXXXXX",
    "US": "+1XXXXXXXXXX",
    "DEFAULT": "+XXXXXXXXXXXX"
}

# =================================================================
# üîí –ù–ê–°–¢–†–û–ô–ö–ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò
# =================================================================

# –í–∫–ª—é—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏?
ENABLE_SECURITY_CHECKS = True

# –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤?
LOG_ADMIN_ACTIONS = True

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
MAX_LOGIN_ATTEMPTS = 3

# –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
LOCKOUT_TIME_MINUTES = 15

# =================================================================
# üìà –ù–ê–°–¢–†–û–ô–ö–ò –ê–ù–ê–õ–ò–¢–ò–ö–ò
# =================================================================

# –°–æ–±–∏—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è?
COLLECT_USAGE_STATS = True

# –°–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º?
DETAILED_MESSAGE_STATS = True

# –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–≤ –¥–Ω—è—Ö)
STATS_CLEANUP_INTERVAL_DAYS = 90

# =================================================================
# üö® –ù–ê–°–¢–†–û–ô–ö–ò –£–í–ï–î–û–ú–õ–ï–ù–ò–ô
# =================================================================

# –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö?
SYSTEM_NOTIFICATIONS = True

# –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö?
NOTIFY_NEW_CONTACTS = True

# –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö?
NOTIFY_ERRORS = True

# =================================================================
# üîÑ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–î–ê–ß–ò
# =================================================================

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏?
ENABLE_AUTO_TASKS = True

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏?
AUTO_CLEANUP_LOGS = True

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö?
AUTO_OPTIMIZE_DB = True

# –ò–Ω—Ç–µ—Ä–≤–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–∑–∞–¥–∞—á (–≤ —á–∞—Å–∞—Ö)
AUTO_TASKS_INTERVAL_HOURS = 6

# =================================================================
# ‚öôÔ∏è –§–£–ù–ö–¶–ò–ò –í–ê–õ–ò–î–ê–¶–ò–ò
# =================================================================

def validate_config():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    errors = []
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
    if BOT_MODE not in ["bot", "userbot"]:
        errors.append("‚ùå BOT_MODE –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 'bot' –∏–ª–∏ 'userbot'")
        return errors
    
    if BOT_MODE == "bot":
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–æ—Ç–∞
        if not BOT_TOKEN:
            errors.append("‚ùå BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–µ–∂–∏–º–∞ bot")
    
    elif BOT_MODE == "userbot":
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è userbot
        if not API_ID or API_ID == 0:
            errors.append("‚ùå API_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–µ–∂–∏–º–∞ userbot")
        
        if not API_HASH:
            errors.append("‚ùå API_HASH –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–µ–∂–∏–º–∞ userbot")
        
        if not PHONE_NUMBER:
            errors.append("‚ùå PHONE_NUMBER –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–µ–∂–∏–º–∞ userbot")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        import re
        if PHONE_NUMBER and not re.match(PHONE_REGEX, PHONE_NUMBER):
            errors.append("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—â–∏–µ –ª–∏–º–∏—Ç—ã
    if MESSAGE_SEND_DELAY < 1:
        errors.append("‚ùå MESSAGE_SEND_DELAY –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 0")
    
    if CONTACTS_PER_PAGE < 1 or CONTACTS_PER_PAGE > 50:
        errors.append("‚ùå CONTACTS_PER_PAGE –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 50")
    
    return errors

def get_all_admin_ids():
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –≤–∫–ª—é—á–∞—è –≤–ª–∞–¥–µ–ª—å—Ü–∞"""
    admin_ids = list(ADMIN_IDS)
    
    if AUTO_ADD_OWNER_AS_ADMIN and OWNER_ID and OWNER_ID not in admin_ids:
        admin_ids.append(OWNER_ID)
    
    return admin_ids

def is_admin(user_id):
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"""
    return user_id in get_all_admin_ids()

def is_owner(user_id):
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º"""
    return user_id == OWNER_ID

def get_telegram_server_config():
    """–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞ Telegram"""
    return TELEGRAM_SERVERS.get(TELEGRAM_SERVER_MODE, TELEGRAM_SERVERS["production"])

def get_connection_params():
    """–ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Telethon"""
    server_config = get_telegram_server_config()
    
    return {
        "api_id": API_ID,
        "api_hash": API_HASH,
        "session": SESSION_NAME,
        "device_model": DEVICE_MODEL,
        "system_version": SYSTEM_VERSION,
        "app_version": APP_VERSION,
        "lang_code": LANG_CODE,
        "system_lang_code": SYSTEM_LANG_CODE,
        "use_ipv6": USE_IPV6,
        "connection_retries": CONNECTION_RETRIES,
        "timeout": CONNECTION_TIMEOUT,
        "flood_sleep_threshold": FLOOD_SLEEP_THRESHOLD
    }

# =================================================================
# üìã –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
# =================================================================

CONFIG_VERSION = "1.0.0"
CONFIG_DESCRIPTION = "Telegram CRM Bot Configuration"

def print_config_info():
    """–í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    server_config = get_telegram_server_config()
    
    print(f"""
ü§ñ {CONFIG_DESCRIPTION} v{CONFIG_VERSION}
{'='*50}
üîß –†–µ–∂–∏–º: {BOT_MODE.upper()}
üì± –¢–µ–ª–µ—Ñ–æ–Ω: {PHONE_NUMBER or '–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}
üåê –°–µ—Ä–≤–µ—Ä: {server_config['ip']}:{server_config['port']} (DC {server_config['dc_id']})
üëë –í–ª–∞–¥–µ–ª–µ—Ü ID: {OWNER_ID or '–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}
üõ°Ô∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤: {len(get_all_admin_ids())}
üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: {DATABASE_PATH}
üìù –õ–æ–≥–∏: {LOGS_DIR}/{LOG_FILE}
‚ö° –ó–∞–¥–µ—Ä–∂–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: {MESSAGE_SEND_DELAY}—Å
üìä –ö–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: {CONTACTS_PER_PAGE}
üóÇÔ∏è –°–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏: {MESSAGE_HISTORY_LIMIT}
üîÑ –ü–æ–≤—Ç–æ—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: {CONNECTION_RETRIES}
‚è±Ô∏è –¢–∞–π–º–∞—É—Ç: {CONNECTION_TIMEOUT}—Å
üí§ Flood Sleep: {FLOOD_SLEEP_THRESHOLD}—Å
{'='*50}
    """)

if __name__ == "__main__":
    # –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ñ–∞–π–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    print_config_info()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    validation_errors = validate_config()
    if validation_errors:
        print("‚ùå –û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:")
        for error in validation_errors:
            print(f"  {error}")
    else:
        print("‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞!") 