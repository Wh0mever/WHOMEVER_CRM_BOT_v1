# üì± Telegram CRM System (Unified Edition)

![Levi Ackerman](https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fc.tenor.com%2FHGPFeIo8looAAAAC%2Flevi-ackerman.gif&f=1&nofb=1&ipt=740d7fa033496bb69c29f0fdb0f6d2c01c9e8f9d2d092c25b0c1a31079cb9c3f)

<!-- 
Author: Wh0mever
Location: SAMARKAND  
GitHub: https://github.com/wh0mever
Final Version: 1.0 ‚ú®
--> 

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![Telegram](https://img.shields.io/badge/Telegram-Bot%20API-blue.svg)](https://core.telegram.org/bots/api)
[![Telethon](https://img.shields.io/badge/Telethon-MTProto-green.svg)](https://docs.telethon.dev)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Status](https://img.shields.io/badge/Status-Production%20Ready-brightgreen.svg)](#)

---

## üéØ –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è CRM —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è Telegram

**–†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Bot API + Userbot –≤ –µ–¥–∏–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

### üöÄ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ï–¥–∏–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** - –Ω–∏–∫–∞–∫–∏—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **–û–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ userbot –º–∏–Ω—É–µ—Ç –ª–∏–º–∏—Ç—ã Bot API
- ‚úÖ **–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è** - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    subgraph "üñ•Ô∏è Main Unified Process"
        A[main_unified.py] --> B[Bot API Handler]
        A --> C[Userbot Client]
        A --> D[Database Manager]
    end
    
    subgraph "ü§ñ Bot API Layer"
        B --> E[Admin Commands]
        B --> F[Inline Keyboards]
        B --> G[Callback Handlers]
    end
    
    subgraph "üë§ Userbot Layer"
        C --> H[Message Sending]
        C --> I[Contact Import]
        C --> J[History Sync]
        C --> K[Incoming Monitor]
    end
    
    subgraph "üíæ Data Layer"
        D --> L[(SQLite Database)]
        L --> M[Contacts Table]
        L --> N[Messages Table]  
        L --> O[Admins Table]
    end
    
    subgraph "üåê Telegram API"
        P[Bot API Servers]
        Q[MTProto Servers]
    end
    
    B <--> P
    C <--> Q
    
    subgraph "üë• Users"
        R[Admin Users]
        S[Client Users]
    end
    
    R <--> B
    S <--> C
    
    style A fill:#ff6b6b,stroke:#ee5a52,stroke-width:3px
    style L fill:#4ecdc4,stroke:#45b7b8,stroke-width:2px
    style P fill:#ffe66d,stroke:#ffd93d,stroke-width:2px
    style Q fill:#a8e6cf,stroke:#88d8a3,stroke-width:2px
```

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```mermaid
sequenceDiagram
    participant A as Admin
    participant B as Bot API
    participant U as Userbot
    participant D as Database
    participant C as Client
    participant T as Telegram

    Note over A,T: üì® –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    A->>B: /start ‚Üí –í—ã–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
    B->>D: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    D-->>B: –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    B-->>A: –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã
    A->>B: –í—ã–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç + –¢–µ–∫—Å—Ç
    B->>U: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ userbot
    U->>T: MTProto –æ—Ç–ø—Ä–∞–≤–∫–∞
    T-->>C: –°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
    U->>D: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é
    
    Note over C,A: üì• –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    C->>T: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    T->>U: MTProto –ø–æ–ª—É—á–µ–Ω–∏–µ
    U->>D: –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
    U->>D: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    U->>B: –£–≤–µ–¥–æ–º–∏—Ç—å –∞–¥–º–∏–Ω–æ–≤
    B->>A: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏
```

---

## üìä –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```mermaid
erDiagram
    CONTACTS ||--o{ MESSAGES : has
    ADMINS ||--o{ SESSIONS : manages
    
    CONTACTS {
        int id PK
        string name
        string phone
        string note
        bigint telegram_user_id
        datetime date_added
    }
    
    MESSAGES {
        int id PK
        int contact_id FK
        bigint message_id
        string direction
        text content
        string media_type
        datetime timestamp
    }
    
    ADMINS {
        int id PK
        string username
        bigint telegram_user_id
        datetime date_added
    }
    
    SESSIONS {
        int id PK
        string session_data
        datetime created_at
        datetime expires_at
    }
```

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏

```mermaid
flowchart LR
    A[–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞] --> B{–ï—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω?}
    B -->|–î–∞| C[–î–æ–±–∞–≤–∏—Ç—å –≤ Telegram]
    B -->|–ù–µ—Ç| D[–¢–æ–ª—å–∫–æ –≤ –ë–î]
    C --> E[–ü–æ–ª—É—á–∏—Ç—å User ID]
    E --> F[–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î]
    D --> F
    F --> G[‚úÖ –ö–æ–Ω—Ç–∞–∫—Ç –≥–æ—Ç–æ–≤]
    
    style A fill:#e1f5fe
    style G fill:#c8e6c9
    style C fill:#fff3e0
```

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Telegram —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º User ID
- ‚úÖ –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç –∏–∑ CSV/Excel
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (10 –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º —Å Telegram —Å—Ç–∞—Ç—É—Å–æ–º
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

### üí¨ –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

```mermaid
stateDiagram-v2
    [*] --> MessageCreated: –ê–¥–º–∏–Ω —Å–æ–∑–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
    MessageCreated --> ValidatingContact: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
    ValidatingContact --> ContactFound: –ö–æ–Ω—Ç–∞–∫—Ç –Ω–∞–π–¥–µ–Ω
    ValidatingContact --> ContactNotFound: –ö–æ–Ω—Ç–∞–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
    ContactNotFound --> CreatingContact: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
    CreatingContact --> ContactFound
    ContactFound --> SendingMessage: –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Userbot
    SendingMessage --> MessageSent: –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
    SendingMessage --> MessageFailed: –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
    MessageSent --> SavingHistory: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
    MessageFailed --> RetryAttempt: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞
    RetryAttempt --> SendingMessage: –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    SavingHistory --> NotifyingSuccess: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞
    NotifyingSuccess --> [*]
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ userbot (–æ–±—Ö–æ–¥ –≤—Å–µ—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Bot API)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—Å—Ç–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —Ñ–ª—É–¥–∞
- ‚úÖ –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- ‚úÖ –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏–π –∏ –æ—Ç–≤–µ—Ç–æ–≤

### üë• –†–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏

```mermaid
journey
    title –ü—É—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –≤ CRM —Å–∏—Å—Ç–µ–º–µ
    section –ü–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç
      –ö–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç –≤ Telegram: 5: –ö–ª–∏–µ–Ω—Ç
      Userbot –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç: 5: –°–∏—Å—Ç–µ–º–∞
      –°–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞: 5: –°–∏—Å—Ç–µ–º–∞
      –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º: 5: –°–∏—Å—Ç–µ–º–∞
    section –û–±—Ä–∞–±–æ—Ç–∫–∞
      –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: 5: –ê–¥–º–∏–Ω
      –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç: 4: –ê–¥–º–∏–Ω
      –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é: 5: –°–∏—Å—Ç–µ–º–∞
    section –†–∞–∑–≤–∏—Ç–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
      –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞: 4: –ö–ª–∏–µ–Ω—Ç, –ê–¥–º–∏–Ω
      –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏: 5: –°–∏—Å—Ç–µ–º–∞
      –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è: 4: –°–∏—Å—Ç–µ–º–∞
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤ –∏–∑ Telegram
- ‚úÖ –¢–µ–≥–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –ó–∞–¥–∞—á–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º

### üõ°Ô∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

```mermaid
flowchart TD
    A[üöÄ –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞] --> B[üì± –ü–µ—Ä–≤—ã–π /start]
    B --> C[üëë –í–ª–∞–¥–µ–ª–µ—Ü —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω]
    C --> D{–î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–æ–≤?}
    
    D -->|–î–∞| E[‚ûï –î–æ–±–∞–≤–∏—Ç—å –ê–¥–º–∏–Ω–∞ 1]
    E --> F[üîí –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞]
    F --> G[‚úÖ –ê–¥–º–∏–Ω 1 –∞–∫—Ç–∏–≤–µ–Ω]
    
    D -->|–ï—â–µ –∞–¥–º–∏–Ω–æ–≤| H[‚ûï –î–æ–±–∞–≤–∏—Ç—å –ê–¥–º–∏–Ω–∞ 2]
    H --> I[üîí –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞]
    I --> J[‚úÖ –ê–¥–º–∏–Ω 2 –∞–∫—Ç–∏–≤–µ–Ω]
    
    G --> K[üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞]
    J --> K
    D -->|–ù–µ—Ç| K
    
    style A fill:#e3f2fd
    style C fill:#fff3e0
    style K fill:#e8f5e8
    style D fill:#f3e5f5
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π: –í–ª–∞–¥–µ–ª–µ—Ü ‚Üí –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã ‚Üí –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
- ‚úÖ –ì—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –ê—É–¥–∏—Ç –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö

---

## üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Python:** 3.8+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3.11+)
- **RAM:** 512 MB
- **–î–∏—Å–∫:** 1 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç:** –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### API Requirements
- **Bot Token:** –û—Ç [@BotFather](https://t.me/BotFather)
- **API Credentials:** –û—Ç [my.telegram.org](https://my.telegram.org)
- **Phone Number:** –î–ª—è userbot –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```python
aiogram>=3.1.1          # Bot API framework
telethon>=1.31.1        # MTProto userbot
loguru>=0.7.0           # Advanced logging
aiofiles>=23.1.0        # Async file operations
aiohttp>=3.8.5          # HTTP client
cryptg>=0.4.0           # Crypto acceleration
```

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/wh0mever/telegram-crm.git
cd telegram-crm
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows)
venv\Scripts\activate

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/macOS)  
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ `Config.py` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```python
# ========================================
# üîë –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# ========================================

# –†–µ–∂–∏–º –≤—Å–µ–≥–¥–∞ "bot" –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
BOT_MODE = "bot"

# ========================================
# ü§ñ BOT API (–ê–¥–º–∏–Ω—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
# ========================================
BOT_TOKEN = "111111111111111111111"

# ========================================  
# üë§ USERBOT API (–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π)
# ========================================
API_ID = 1111111111111111111
API_HASH = "11111111111111111111"
PHONE_NUMBER = "+111111111"

# ========================================
# üåê –°–ï–†–í–ï–†–´ TELEGRAM  
# ========================================
TELEGRAM_SERVER_MODE = "production"  # production/test
CONNECTION_RETRIES = 5
CONNECTION_TIMEOUT = 30
FLOOD_SLEEP_THRESHOLD = 60

# ========================================
# ‚ö° –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨
# ========================================
MESSAGE_SEND_DELAY = 3              # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
CONTACTS_PER_PAGE = 10              # –ö–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
MESSAGE_HISTORY_LIMIT = 20          # –°–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏
MAX_SEND_ATTEMPTS = 3               # –ü–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
```

### 4. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
python main_unified.py
```

**–ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
1. –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
2. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ Telegram
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ - –ø–∞—Ä–æ–ª—å 2FA
4. –°–µ—Å—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

### 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É –≤ Telegram - –≤–ª–∞–¥–µ–ª–µ—Ü —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üí° –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

```mermaid
mindmap
  root)–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é(
    üìá–ö–æ–Ω—Ç–∞–∫—Ç—ã
      ‚ûï–î–æ–±–∞–≤–∏—Ç—å
      üìã–°–ø–∏—Å–æ–∫
      üîç–ü–æ–∏—Å–∫
      üìä–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    üì®–°–æ–æ–±—â–µ–Ω–∏—è
      üìá–ü–æ –∫–æ–Ω—Ç–∞–∫—Ç—É
      üì±–ü–æ –Ω–æ–º–µ—Ä—É
      üì¢–†–∞—Å—Å—ã–ª–∫–∞
      üìù–®–∞–±–ª–æ–Ω—ã
    üóÇÔ∏è–ò—Å—Ç–æ—Ä–∏—è
      üìñ–ü–æ –∫–æ–Ω—Ç–∞–∫—Ç—É
      üìÖ–ü–æ –¥–∞—Ç–µ
      üîç–ü–æ–∏—Å–∫
      üìà–ê–Ω–∞–ª–∏—Ç–∏–∫–∞
    üë•–ê–¥–º–∏–Ω—ã
      üìã–°–ø–∏—Å–æ–∫
      ‚ûï–î–æ–±–∞–≤–∏—Ç—å
      ‚ûñ–£–¥–∞–ª–∏—Ç—å
      üîí–ü—Ä–∞–≤–∞
    üìä–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
      üìà–ì—Ä–∞—Ñ–∏–∫–∏
      üìã–û—Ç—á–µ—Ç—ã
      üíæ–≠–∫—Å–ø–æ—Ä—Ç
```

### üìá –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞

**–ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
1. –ö–æ–Ω—Ç–∞–∫—Ç—ã ‚Üí ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
2. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
   ```
   –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
   +79001234567
   –í–∞–∂–Ω—ã–π –∫–ª–∏–µ–Ω—Ç, –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è —É—Å–ª—É–≥–æ–π –ê
   ```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Telegram —á–µ—Ä–µ–∑ userbot
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ telegram_user_id
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã

#### –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç

```csv
name,phone,note
"–ê–Ω–Ω–∞ –°–º–∏—Ä–Ω–æ–≤–∞","+79001111111","VIP –∫–ª–∏–µ–Ω—Ç"
"–ü–µ—Ç—Ä –ò–≤–∞–Ω–æ–≤","+79002222222","–ù–æ–≤—ã–π –ª–∏–¥"
"–ú–∞—Ä–∏—è –ö–æ–∑–ª–æ–≤–∞","+79003333333","–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç"
```

**–ò–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É:**
```bash
python import_contacts.py contacts.csv
```

### üí¨ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

#### –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞

```mermaid
flowchart TD
    A[üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ] --> B{–°–ø–æ—Å–æ–± –≤—ã–±–æ—Ä–∞?}
    B -->|üìá –ü–æ –∫–æ–Ω—Ç–∞–∫—Ç—É| C[–í—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞]
    B -->|üì± –ü–æ –Ω–æ–º–µ—Ä—É| D[–í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞]
    B -->|üì¢ –†–∞—Å—Å—ã–ª–∫–∞| E[–í—ã–±–æ—Ä –≥—Ä—É–ø–ø—ã]
    
    C --> F[–í—ã–±–æ—Ä –∫–æ–Ω—Ç–∞–∫—Ç–∞]
    D --> G[–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–º–µ—Ä–∞]
    E --> H[–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏]
    
    F --> I[–í–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è]
    G --> I
    H --> I
    
    I --> J[–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Userbot]
    J --> K[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î]
    K --> L[‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ]
    
    style A fill:#e3f2fd
    style L fill:#e8f5e8
    style J fill:#fff3e0
```

#### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π API

```python
from telegram_crm import CRMBot

bot = CRMBot()

# –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–¥–Ω–æ–º—É –∫–æ–Ω—Ç–∞–∫—Ç—É
await bot.send_message(
    contact_id=123,
    text="–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
    media_url="https://example.com/image.jpg"
)

# –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞
await bot.broadcast_message(
    contact_ids=[123, 456, 789],
    text="–í–∞–∂–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö!",
    delay=3  # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏
)
```

### üóÇÔ∏è –†–∞–±–æ—Ç–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞

**–§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:**
- üìñ –ò—Å—Ç–æ—Ä–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- üìÖ –ò—Å—Ç–æ—Ä–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥
- üîç –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–π
- üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–ø–∏—Å–∫–∏

**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ
await sync_chat_history(contact_id, telegram_user_id)

# –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —á–∞—Ç–æ–≤
await sync_all_chats()
```

### üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É:**
```bash
/add_admin 123456789
```

**–ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã ‚Üí ‚ûï –î–æ–±–∞–≤–∏—Ç—å
2. –í–≤–µ–¥–∏—Ç–µ Telegram ID
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
- üè† **–í–ª–∞–¥–µ–ª–µ—Ü:** –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É
- üëë **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- üë§ **–û–ø–µ—Ä–∞—Ç–æ—Ä:** –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### üìà –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

```mermaid
pie title –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
    "–ò—Å—Ö–æ–¥—è—â–∏–µ" : 65
    "–í—Ö–æ–¥—è—â–∏–µ" : 35
```

```mermaid
xychart-beta
    title "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º"
    x-axis [–ü–Ω, –í—Ç, –°—Ä, –ß—Ç, –ü—Ç, –°–±, –í—Å]
    y-axis "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π" 0 --> 100
    bar [23, 45, 56, 78, 43, 23, 35]
```

### üìã –û—Ç—á–µ—Ç—ã

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã:**
- üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üìä –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- üìà –ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üéØ –ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

**–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
python export.py contacts --format csv

# –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
python export.py messages --date-from 2024-01-01 --format xlsx

# –ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø —Å–∏—Å—Ç–µ–º—ã
python backup.py --full
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è MTProto

```python
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
TELEGRAM_SERVERS = {
    "production": {
        "ip": "123",      # DC 2 (–ï–≤—Ä–æ–ø–∞)
        "port": 111,
        "dc_id": 2,
        "ipv6": False
    },
    "alternative": {
        "ip": "111",      # DC 2 Alternative
        "port": 443, 
        "dc_id": 2,
        "ipv6": False
    }
}

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
CONNECTION_RETRIES = 10             # –ë–æ–ª—å—à–µ –ø–æ–ø—ã—Ç–æ–∫
CONNECTION_TIMEOUT = 60             # –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç
FLOOD_SLEEP_THRESHOLD = 120         # –ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—É–¥–∞
USE_IPV6 = False                    # –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å IPv4
```

### üöÄ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤:**

```python
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤
MAX_CONTACTS_PER_BATCH = 100
MAX_MESSAGES_PER_HOUR = 1000
MESSAGE_SEND_DELAY = 1              # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö  
DB_POOL_SIZE = 20                   # –ü—É–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
DB_TIMEOUT = 120                    # –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
AUTO_VACUUM = True                  # –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ë–î

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
ENABLE_REDIS_CACHE = True           # Redis –¥–ª—è –∫—ç—à–∞
CACHE_TTL = 3600                    # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞
```

---

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### TelegramConflictError

```bash
Error: Conflict: terminated by other getUpdates request
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python
Get-Process python | Stop-Process -Force

# –û—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
rm -rf __pycache__/
rm *.session-journal

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
python main_unified.py
```

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π userbot

```bash
Error: SessionPasswordNeededError
```

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –í Config.py –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å 2FA
TELEGRAM_2FA_PASSWORD = "your_password"

# –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å 2FA –≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
```

#### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQLite
python optimize_db.py

# –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
python create_indexes.py

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python cleanup.py --older-than 90d
```

### üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤:**
```
logs/
‚îú‚îÄ‚îÄ crm_unified.log          # –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏
‚îú‚îÄ‚îÄ crm_errors.log          # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏  
‚îú‚îÄ‚îÄ crm_performance.log     # –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ crm_audit.log          # –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
```bash
# –û–±—â–∏–µ –ª–æ–≥–∏
tail -f logs/crm_unified.log

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
tail -f logs/crm_errors.log | grep ERROR

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É
tail -f logs/crm_unified.log | grep "userbot"
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üõ°Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```mermaid
graph LR
    A[üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å] --> B[–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è]
    A --> C[–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è]
    A --> D[–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ]
    A --> E[–ê—É–¥–∏—Ç]
    
    B --> B1[2FA –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ]
    B --> B2[–°–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏]
    
    C --> C1[–ü—Ä–∞–≤–∞ –ø–æ —Ä–æ–ª—è–º]
    C --> C2[–ü—Ä–∏–Ω—Ü–∏–ø –º–∏–Ω–∏–º—É–º–∞]
    
    D --> D1[TLS/SSL]
    D --> D2[–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ë–î]
    
    E --> E1[–õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π]
    E --> E2[–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥]
    
    style A fill:#ff6b6b
    style B fill:#4ecdc4
    style C fill:#45b7b8
    style D fill:#96ceb4
    style E fill:#feca57
```

**Checklist –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í–∫–ª—é—á–µ–Ω–∞ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ IP
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

### üîí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
- üìù –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö
- üóëÔ∏è –ü—Ä–∞–≤–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- üìã –í–µ–¥–µ–Ω–∏–µ —Ä–µ–µ—Å—Ç—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- üîí –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üìä –ê–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

---

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### üåê –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .
EXPOSE 8080

CMD ["python", "main_unified.py"]
```

```yaml
# docker-compose.yml
version: '3.8'
services:
  telegram-crm:
    build: .
    ports:
      - "8080:8080"
    volumes:
      - ./database:/app/database
      - ./logs:/app/logs
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
      - API_ID=${API_ID}
      - API_HASH=${API_HASH}
      - PHONE_NUMBER=${PHONE_NUMBER}
    restart: unless-stopped
```

#### Systemd —Å–µ—Ä–≤–∏—Å

```ini
# /etc/systemd/system/telegram-crm.service
[Unit]
Description=Telegram CRM System
After=network.target

[Service]
Type=simple
User=telegram-crm
WorkingDirectory=/opt/telegram-crm
ExecStart=/opt/telegram-crm/venv/bin/python main_unified.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl enable telegram-crm
sudo systemctl start telegram-crm
sudo systemctl status telegram-crm
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

```python
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus
from prometheus_client import Counter, Histogram, start_http_server

messages_sent = Counter('telegram_crm_messages_sent_total')
response_time = Histogram('telegram_crm_response_time_seconds')

# –ú–µ—Ç—Ä–∏–∫–∏ –≤ –∫–æ–¥–µ
messages_sent.inc()
with response_time.time():
    await send_message()
```

---

## üìà Roadmap —Ä–∞–∑–≤–∏—Ç–∏—è

```mermaid
timeline
    title Roadmap Telegram CRM System
    
    section 2025 Q1
        v1.0 : –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
             : Bot + Userbot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
             : –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
             : –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
             
    section 2025 Q2  
        v1.1 : –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∫–∏
             : REST API endpoints
             : –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ CRM
             : Kanban –¥–æ—Å–∫–∏ –¥–ª—è –∑–∞–¥–∞—á
             
    section 2025 Q3
        v1.2 : AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
             : Radar –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏  
             : –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
             : Architecture –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è —Å—Ö–µ–º
             
    section 2025 Q4
        v2.0 : –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
             : –ë–µ–ª—ã–π –ª–µ–π–±–ª —Ä–µ—à–µ–Ω–∏—è
             : Block –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
             : Marketplace –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
```

### üîÆ –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**v1.1 - Web Dashboard (Q2 2025):**
- üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å Mermaid 11.6+ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
- üìä Kanban –¥–æ—Å–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á (–Ω–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ Mermaid)
- üîå REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- üì± PWA –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**v1.2 - AI & Analytics (Q3 2025):**
- ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
- üì° Radar –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ (Mermaid 11.6+)
- üèóÔ∏è Architecture –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å—Ö–µ–º
- üß† –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è —Å Block –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏

**v2.0 - Enterprise (Q4 2025):**
- üè¢ –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- üé® –ë–µ–ª—ã–π –ª–µ–π–±–ª —Ä–µ—à–µ–Ω–∏—è
- üì¶ Packet –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–ª—è —Å–µ—Ç–µ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- ‚òÅÔ∏è –û–±–ª–∞—á–Ω–∞—è SaaS –≤–µ—Ä—Å–∏—è

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

### üí¨ –°–≤—è–∑—å —Å –∞–≤—Ç–æ—Ä–æ–º

**Contact:** https://whomever.tech

**GitHub:** [@wh0mever](https://github.com/wh0mever)

**Location:** SAMARKAND, Uzbekistan

### üêõ –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Issues](https://github.com/wh0mever/telegram-crm/issues)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π issue —Å:
   - –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
   - –®–∞–≥–∞–º–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –õ–æ–≥–∞–º–∏ –æ—à–∏–±–æ–∫
   - –í–µ—Ä—Å–∏–µ–π —Å–∏—Å—Ç–µ–º—ã

### ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

```bash
# 1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/yourusername/telegram-crm.git

# 2. –°–æ–∑–¥–∞–Ω–∏–µ feature branch
git checkout -b feature/amazing-feature

# 3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π
git commit -m 'Add amazing feature'

# 4. Push –≤ branch
git push origin feature/amazing-feature

# 5. –°–æ–∑–¥–∞–Ω–∏–µ Pull Request
```

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üí¨ [Telegram –∫–∞–Ω–∞–ª](https://t.me/wh0mever_dev)
- üó®Ô∏è [Discord —Å–æ–æ–±—â–µ—Å—Ç–≤–æ](https://discord.gg/wh0mever)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

```
MIT License

Copyright (c) 2025 Wh0mever

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## üéâ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

**Special thanks to:**
- üì± [Telegram](https://telegram.org) –∑–∞ –ø–æ—Ç—Ä—è—Å–∞—é—â—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
- üêç [Python](https://python.org) —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –∑–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- üíô [Telethon](https://github.com/LonamiWebs/Telethon) –∑–∞ MTProto –∫–ª–∏–µ–Ω—Ç  
- ü§ñ [aiogram](https://github.com/aiogram/aiogram) –∑–∞ Bot API framework
- üîó –í—Å–µ–º –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–∞–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–∏—Å—Ç–µ–º—ã

---

<div align="center">

**Made with ‚ù§Ô∏è in SAMARKAND**

*–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–ª–µ–∑–Ω—ã–º, –ø–æ—Å—Ç–∞–≤—å—Ç–µ ‚≠ê –Ω–∞ GitHub!*

[![GitHub stars](https://img.shields.io/github/stars/wh0mever/WHOMEVER_CRM_BOT_v1?style=social)](https://github.com/wh0mever/WHOMEVER_CRM_BOT_v1)
[![GitHub forks](https://img.shields.io/github/forks/wh0mever/WHOMEVER_CRM_BOT_v1?style=social)](https://github.com/wh0mever/WHOMEVER_CRM_BOT_v1)

</div> 
